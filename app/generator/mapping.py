"""
各種マッピングデータを管理するモジュール
シフト生成やチェックで使用する定数的なマッピングを一元管理する
"""
from ortools.sat.python import cp_model

# シフトタイプとその所要人数のマッピング
SHIFT_TYPES = {
    '▲': 2,  # 早番
    '日': 2,  # 日勤
    '▼': 2,  # 遅番
    '／': 2,  # 夜勤
    '×': 2,  # 夜勤明け
    '公': None,  # 公休
    '☆': None,  # 研修
    '_': None   # ダミー
}

# シフト名称の標準化マッピング
SHIFT_TYPE_MAPPING = {
    "早番": "▲",
    "日勤": "日",
    "遅番": "▼",
    "夜勤": "／",
    "夜勤明け": "×",
    "明け": "×",
    "休み": "公",
    "特殊": "☆",
    "早": "▲",
    "遅": "▼",
}

SHIFT_TYPE_FIXMAPPING={
    "日": "日勤",
    "早": "早番",
    "遅": "遅番",
    "夜": "夜勤",
    "明": "明け",
    "休": "休み",
    "公": "休み",
    "▲": "早番",
    "▼": "遅番",
    "▽": "遅番",
    "／": "夜勤",
    "×": "明け",
    "☆": "特殊",
}

# 漢字表記を数値に変換するマッピング
KANJI_TO_NUMBER = {
    "1回": 1, "2回": 2, "3回": 3, "4回": 4, "5回": 5,
    "一回": 1, "二回": 2, "三回": 3, "四回": 4, "五回": 5,
    "単休": 1, "二連休": 2, "三連休": 3, "四連休": 4, "五連休": 5,
    "一連勤": 1, "二連勤": 2, "三連勤": 3, "四連勤": 4, "五連勤": 5, "六連勤": 6,
    "単勤": 1,
    "第一": 1, "第二": 2, "第三": 3, "第四": 4, "第五": 5
}

# OR-Toolsのソルバーステータスマッピング
STATUS_MAP = {
    cp_model.OPTIMAL: "OPTIMAL",        # 最適解が見つかった
    cp_model.FEASIBLE: "FEASIBLE",      # 実行可能解が見つかった
    cp_model.INFEASIBLE: "INFEASIBLE",  # 実行可能解が存在しない
    cp_model.MODEL_INVALID: "MODEL_INVALID"  # モデルが無効
}

class Constraint:
    """個別制約の型定義"""
    type: str  # "必須" or "選好"
    category: str  # "曜日", "勤務区分" など
    sub_category: str  # "休み", "多め", "少なめ" など
    target: str  # 対象（曜日番号や勤務区分名）
